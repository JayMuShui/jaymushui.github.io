import{g as I,u as N,p as i,i as S,a as z,b as L,d as U,c as j,j as B,h as F,e as M,f as O}from"./app.B7PMaYgc.js";import{_ as T}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.CYNSc5B-.js";import{_ as A}from"./YunCategories.vue_vue_type_script_setup_true_lang.CT0RmP-A.js";import{_ as D}from"./YunPageHeader.CNMp6PSZ.js";import{p as W,k as l,M as q,P as E,O as f,C as o,a3 as r,N as d,a6 as H,R as J,a2 as K,S as G,V as Q,u,F as X}from"./framework.DlV0k-5J.js";import{a as Z}from"./chunks/vue-router.geVcZ14w.js";import"./chunks/dayjs.Byk5cVHE.js";import{u as ee}from"./chunks/vue-i18n.D6tEDyfS.js";import"./chunks/@vueuse/motion.DIsYeaHF.js";import"./chunks/pinia.BdjdCKlI.js";import"./chunks/nprogress.CMY0kOW-.js";import"./useInvisibleElement.bCVCtLe0.js";const te={text:"center",class:"yun-text-light",p:"2"},de=W({__name:"categories",setup(oe){const{t:p,locale:ae}=ee(),v=I(),s=N(),y=Z(),t=l(()=>{const e=y.query.category;if(e)try{return JSON.parse(decodeURIComponent(e))}catch{return decodeURIComponent(e)}return""}),h=l(()=>typeof t.value=="object"&&t.value!==null?i(t.value):t.value==="Uncategorized"?p("category.uncategorized"):t.value),C=S(),w=l(()=>(s.value.icon||(s.value.icon="i-ri-folder-2-line"),s.value.icon)),Y=l(()=>v.postList.filter(e=>{if(e.categories&&t.value!=="Uncategorized"){const c=(typeof t.value=="object",t.value);return Array.isArray(e.categories)?e.categories.some(a=>i(a)===i(c)):i(e.categories)===i(c)}return!e.categories&&t.value==="Uncategorized"?e.categories===void 0:!1})),g=l(()=>{const e=new Map;for(const[c,a]of C.value.children){const n=i(c);if(e.has(n)){if(e.get(n).total+=a.total,a.children&&e.get(n).children)for(const[_,m]of a.children)e.get(n).children.set(_,m)}else e.set(n,{...a,displayName:n,children:a.children?new Map(a.children):new Map})}return e}),b=z(s);return L([U({"@type":"CollectionPage"})]),(e,c)=>{const a=j,n=D,_=A,m=q("RouterView"),x=T,P=B,R=F,V=M,$=O;return f(),E(X,null,[o(V,null,{default:r(()=>[o(a),o(m,null,{default:r(({Component:k})=>[(f(),d(H(k),null,{"main-header":r(()=>[o(n,{title:u(b)||u(p)("menu.categories"),icon:w.value,color:u(s).color,"page-title-class":u(s).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":r(()=>[o(K,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:r(()=>[G("div",te,Q(u(p)("counter.categories",g.value.size)),1)]),_:1}),o(_,{categories:g.value},null,8,["categories"]),o(m)]),"main-nav-before":r(()=>[t.value?(f(),d(P,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:r(()=>[o(n,{m:"t-10",title:h.value,icon:"i-ri-folder-open-line"},null,8,["title"]),o(x,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:Y.value},null,8,["posts"])]),_:1})):J("v-if",!0)]),_:2},1024))]),_:1}),o(R)]),_:1}),o($)],64)}}});export{de as default};
