import{b as U,d as E,n as q,A as z,u as D,p as c,g as J,a as W,c as H,j as Z,h as G,e as K,f as Q,T as S}from"./app.B7PMaYgc.js";import{_ as X}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.CYNSc5B-.js";import{_ as ee}from"./YunLayoutPostTag.Bki3QIRE.js";import{_ as te}from"./YunPageHeader.CNMp6PSZ.js";import{p as ne,k as d,c as oe,M as ae,P as w,O as p,C as a,a3 as r,N as h,a6 as se,R as re,S as R,a2 as ce,V as le,u as l,F as b,$ as ie,Z as ue}from"./framework.DlV0k-5J.js";import{a as me,u as pe}from"./chunks/vue-router.geVcZ14w.js";import{u as _e}from"./useInvisibleElement.bCVCtLe0.js";import"./chunks/dayjs.Byk5cVHE.js";import{u as fe}from"./chunks/vue-i18n.D6tEDyfS.js";import"./chunks/@vueuse/motion.DIsYeaHF.js";import"./chunks/pinia.BdjdCKlI.js";import"./chunks/nprogress.CMY0kOW-.js";const ge={class:"yun-text-light",text:"center",p:"2"},ye={class:"justify-center items-end",flex:"~ wrap",gap:"1"},Ye=ne({__name:"tags",setup(de){U([E({"@type":"CollectionPage"})]);const k=me(),P=pe(),$=q(),C=z(),I=e=>{var y;const t=new S("#999999"),o=new S(((y=$.value.colors)==null?void 0:y.primary)||"#3eaf7c"),n=Array.from(C.value.values()).map(v=>v.count),i=n.length>0?Math.max(...n):1,u=n.length>0?Math.min(...n):1,f=i-u,g=f>0?(e-u)/f:0;return{"--yun-tag-color":t.mix(o,g*100).toString(),fontSize:`${g*36+12}px`}},{t:T,locale:ve}=fe(),_=D(),s=d(()=>{const e=k.query.tag;if(e)try{return JSON.parse(decodeURIComponent(e))}catch{return decodeURIComponent(e)}return""}),Y=d(()=>typeof s.value=="object"&&s.value!==null?c(s.value):s.value),L=J(),j=d(()=>L.postList.filter(e=>{if(e.tags){const t=(typeof s.value=="object",s.value);return Array.isArray(e.tags)?e.tags.some(o=>c(o)===c(t)):c(e.tags)===c(t)}return!1})),x=oe(),{show:A}=_e(x);function V(e){const t=encodeURIComponent(typeof e=="object"?JSON.stringify(e):e);P.push({query:{tag:t}}),A()}const O=W(_),N=d(()=>{const e=new Map;return C.value.forEach((t,o)=>{const n=c(o);if(e.has(n)){const i=e.get(n);i.count+=t.count}else e.set(n,{name:o,count:t.count})}),Array.from(e.entries()).map(([t,{name:o,count:n}])=>({name:o,count:n,displayName:t})).sort((t,o)=>t.displayName.localeCompare(o.displayName))});return(e,t)=>{const o=H,n=te,i=ee,u=ae("RouterView"),f=X,g=Z,y=G,v=K,B=Q;return p(),w(b,null,[a(v,null,{default:r(()=>[a(o),a(u,null,{default:r(({Component:F})=>[(p(),h(se(F),null,{"main-header":r(()=>[a(n,{title:l(O)||l(T)("menu.tags"),icon:l(_).icon||"i-ri-tag-line",color:l(_).color,"page-title-class":l(_).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":r(()=>[a(ce,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:r(()=>[R("div",ge,le(l(T)("counter.tags",N.value.length)),1)]),_:1}),R("div",ye,[(p(!0),w(b,null,ie(N.value,(m,M)=>(p(),h(i,{key:m.displayName,i:M,title:m.displayName,count:m.count,style:ue(I(m.count)),onClick:he=>V(m.name)},null,8,["i","title","count","style","onClick"]))),128))]),a(u)]),"main-nav-before":r(()=>[s.value?(p(),h(g,{key:0,ref_key:"collapse",ref:x,m:"t-4",w:"full"},{default:r(()=>[a(n,{title:Y.value,icon:"i-ri-hashtag"},null,8,["title"]),a(f,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:j.value},null,8,["posts"])]),_:1},512)):re("v-if",!0)]),_:2},1024))]),_:1}),a(y)]),_:1}),a(B)],64)}}});export{Ye as default};
