import{p as K,n as O,o as V,_ as X,k as F,s as I,q as Z,r as J,t as Q,v as ee,w as te,x as W,e as ne,f as ae}from"./app.B7PMaYgc.js";import{p as g,P as o,O as a,S as r,U as M,u as i,L as P,R as l,c as $,k,w as se,o as j,F as S,V as w,N as Y,a3 as L,X as z,Z as R,$ as E,C as _,a2 as q,M as oe}from"./framework.DlV0k-5J.js";import"./chunks/dayjs.Byk5cVHE.js";import{u as U}from"./chunks/vue-i18n.D6tEDyfS.js";import{g as G}from"./animation.DwG1iAC7.js";import{a as re}from"./chunks/vue-router.geVcZ14w.js";import"./chunks/@vueuse/motion.DIsYeaHF.js";import"./chunks/pinia.BdjdCKlI.js";import"./chunks/nprogress.CMY0kOW-.js";const le={class:"w-full px-4 flex-center"},ie={class:"yun-notice w-full"},ce=["innerHTML"],ue=g({__name:"YunNotice",props:{content:{}},setup(v){return(e,t)=>(a(),o("div",le,[r("div",ie,[r("span",{innerHTML:i(K)(e.content)},null,8,ce),M(e.$slots,"default")])]))}}),_e={},ve={class:"grid-bg"};function pe(v,e){return a(),o("div",ve,[l(" <YunAEFrame /> "),l(" <YunAERect /> ")])}const me=P(_e,[["render",pe]]),de={class:"say"},he={class:"say-content-wrapper"},fe={class:"say-content animate-fade-in animate-iteration-1"},ye={key:0,class:"say-content animate-fade-in animate-iteration-1"},ge={key:1,class:"translated-content"},be={class:"say-meta"},$e={key:0,class:"meta-item"},we={class:"meta-content"},ke={key:0,class:"meta-separator"},xe={key:1,class:"meta-translation"},Ce={key:1,class:"meta-item"},Ye={class:"meta-content"},Se={key:0,class:"meta-separator"},ze={key:1,class:"meta-translation"},Ae={key:0,class:"translation-icon"},Ne=g({__name:"YunSay",setup(v){const e=O(),{locale:t}=U(),n=$(""),s=$(""),u=$(""),c=$(""),y=$(""),h=$(""),p=$(!1),m=k(()=>["zh-TW","zh-HK","zh-MO","zh-Hant"].includes(t.value)),C=k(()=>["zh-CN","zh-SG","zh-Hans","zh"].includes(t.value)),A=k(()=>m.value&&p.value&&c.value||n.value),N=k(()=>m.value&&p.value&&y.value||s.value),T=k(()=>m.value&&p.value&&h.value||u.value);async function B(d){if(!d)return!1;try{const x=await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=zh-CN&dt=t&q=${encodeURIComponent(d)}`)).json();return["zh-CN","zh-SG","zh-Hans","zh","zh-TW","zh-HK","zh-MO","zh-Hant"].includes(x[2])}catch(b){return console.error("Language detection error:",b),!1}}async function f(d,b){if(!d)return"";try{return(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${b}&dt=t&q=${encodeURIComponent(d)}`)).json())[0][0][0]}catch(x){return console.error("Translation error:",x),d}}async function D(){const d=e.value.say.hitokoto.enable?e.value.say.hitokoto.api:e.value.say.api;if(d)try{const b=await fetch(d);if(b.ok){const x=await b.json();if(e.value.say.hitokoto.enable)n.value=x.hitokoto,s.value=x.from_who,u.value=x.from;else{const H=x[Math.floor(Math.random()*x.length)];H.content?(n.value=H.content,s.value=H.author,u.value=H.from):n.value=H}p.value=await B(n.value),m.value&&p.value?(c.value=await f(n.value,t.value),y.value=await f(s.value,t.value),h.value=await f(u.value,t.value)):!C.value&&p.value&&(c.value=await f(n.value,t.value),y.value=await f(s.value,t.value),h.value=await f(u.value,t.value))}else throw new Error(`${e.value.say.api}, HTTP error, status = ${b.status}`)}catch(b){console.error(b.message)}}return se(t,async d=>{m.value&&p.value?(c.value=await f(n.value,d),y.value=await f(s.value,d),h.value=await f(u.value,d)):!C.value&&p.value?(c.value=await f(n.value,d),y.value=await f(s.value,d),h.value=await f(u.value,d)):(c.value="",y.value="",h.value="")}),j(()=>{D()}),(d,b)=>(a(),o("div",de,[r("div",he,[m.value&&p.value?(a(),o(S,{key:0},[l(" 繁体中文环境下显示转换后的内容 "),r("span",fe,w(A.value),1)],64)):(a(),o(S,{key:1},[l(" 其他环境下显示原文和翻译 "),n.value?(a(),o("span",ye,w(n.value),1)):l("v-if",!0),c.value?(a(),o("span",ge,w(c.value),1)):l("v-if",!0)],64))]),r("div",be,[N.value?(a(),o("div",$e,[r("span",we,w(N.value),1),y.value&&!m.value?(a(),o("span",ke,"|")):l("v-if",!0),y.value&&!m.value?(a(),o("span",xe,w(y.value),1)):l("v-if",!0)])):l("v-if",!0),T.value?(a(),o("div",Ce,[r("span",Ye,w(T.value),1),h.value&&!m.value?(a(),o("span",Se,"|")):l("v-if",!0),h.value&&!m.value?(a(),o("span",ze,w(h.value),1)):l("v-if",!0)])):l("v-if",!0)]),c.value&&!m.value?(a(),o("div",Ae,b[0]||(b[0]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1),r("span",{class:"translation-by"},"by Google Translation",-1)]))):l("v-if",!0)]))}}),Te=g({__name:"YunSiteLinkItem",props:{page:{}},setup(v){const e=V();return(t,n)=>{const s=X;return a(),Y(s,{class:"link-item inline-flex-center gap-2 transition rounded-lg text-xl p-2 md:text-lg md:p-2 lg:text-xl lg:p-3 text-$va-c-text",bg:"white/5 dark:black/5","inline-flex":"",to:t.page.url,title:t.page.name,style:R(`color:${t.page.color}`),hover:"bg-white/80 dark:bg-black/80",onClick:n[0]||(n[0]=u=>i(e).fullscreenMenu.isOpen=!1)},{default:L(()=>[r("div",{class:z([t.page.icon,"icon"])},null,2),r("span",null,w(t.page.name),1)]),_:1},8,["to","title","style"])}}}),Be={key:0,class:"site-description text-$va-c-text text-sm"},He=g({__name:"YunSiteDescription",setup(v){const e=F();return(t,n)=>i(e).description?(a(),o("div",Be,w(i(e).description),1)):l("v-if",!0)}}),Le={key:0,class:"site-subtitle block text-$va-c-text op-80 font-medium",text:"sm"},Ie=g({__name:"YunSiteSubtitle",setup(v){const e=F();return(t,n)=>i(e).subtitle?(a(),o("h4",Le,w(i(e).subtitle),1)):l("v-if",!0)}}),Me=g({__name:"YunAnimLineDraw",setup(v){const e=$(!1);return j(()=>{e.value=!0}),(t,n)=>(a(),o("div",{class:z(["line",{enter:e.value}])},null,2))}}),je=P(Me,[["__scopeId","data-v-fae4f987"]]),qe={key:0,class:"site-author-intro",m:"t-0 b-4"},De=g({__name:"YunAuthorIntro",setup(v){const e=F();return(t,n)=>i(e).author.intro?(a(),o("div",qe,w(i(e).author.intro),1)):l("v-if",!0)}}),Ve={key:0,class:"line-burst-effects absolute"},Fe=g({__name:"LineBurstEffects",props:{delay:{},duration:{}},setup(v){const e=v,t=$(!0);return j(async()=>{await I(e.delay),t.value=!1,await I(e.duration),t.value=!0}),(n,s)=>t.value?l("v-if",!0):(a(),o("div",Ve,[(a(),o(S,null,E(8,u=>r("div",{key:u,class:"line"},s[0]||(s[0]=[r("div",null,[r("span")],-1)]))),64))]))}}),Pe={flex:"~ col",class:"yun-square-container items-center justify-center text-center max-w-2xl"},Re={flex:"~ col",class:"yun-square square-rotate z-1 bg-white/80"},Ee={class:"py-4 md:py-5 lg:pt-6"},Ge={flex:"~ col",class:"gap-2 items-center justify-center"},Oe={class:"scale-x--100 py-4 md:py-5 lg:pb-6"},We={class:"mt-4 flex-center w-72 md:w-150 m-auto gap-2",flex:"~ wrap"},Ue=g({__name:"YunPrologueSquare",setup(v){const{t:e}=U(),t=O(),n=$(!1);return(s,u)=>{const c=Fe,y=Z,h=J,p=De,m=je,C=Q,A=Ie,N=He,T=ee,B=Te;return a(),o("div",Pe,[M(s.$slots,"default",{},void 0,!0),r("div",{flex:"~ col center",class:z(["info-with-avatar relative duration-800 transition-cubic-bezier-ease-in",{show:n.value}])},[_(q,{"enter-from-class":"enter-from","enter-to-class":"enter-to",appear:"",onAfterAppear:u[0]||(u[0]=f=>n.value=!0)},{default:L(()=>[r("div",Re,[_(c,{class:"absolute top-0 left-0 right-0 bottom-0 size-full scale-200",delay:200,duration:400}),_(q,{"enter-from-class":"op-0","enter-to-class":"op-100","enter-active-class":"transition-400 delay-400",appear:""},{default:L(()=>[_(y)]),_:1})])]),_:1}),r("div",{class:z(["info",{show:n.value}])},[_(h,{class:"mt-3"}),_(p),r("div",Ee,[_(m)]),r("div",Ge,[_(C),_(A),_(N)]),r("div",Oe,[_(m)]),_(T),r("div",We,[_(B,{page:{name:i(e)("nav.posts"),icon:"i-ri-article-line",url:"/posts/"}},null,8,["page"]),M(s.$slots,"default",{},void 0,!0),(a(!0),o(S,null,E(i(t).pages,(f,D)=>(a(),Y(B,{key:D,page:{...f,name:i(e)(f.name)}},null,8,["page"]))),128))])],2)],2)])}}}),Ke=P(Ue,[["__scopeId","data-v-96eeb825"]]),Xe=g({__name:"YunGoDown",setup(v){return(e,t)=>(a(),o("button",{class:"go-down w-20 bottom-0 text-sm md:bottom-2 md:text-40px","aria-label":"go-down",onClick:t[0]||(t[0]=(...n)=>i(G)&&i(G)(...n))},t[1]||(t[1]=[r("div",{"i-ri-arrow-down-s-fill":"","inline-flex":""},null,-1)])))}}),Ze={class:"banner-char-container"},Je={class:"char"},Qe=g({__name:"YunBannerCharContainer",props:{title:{},chars:{}},setup(v){return(e,t)=>(a(),o("div",Ze,[(a(!0),o(S,null,E(e.title,(n,s)=>(a(),o("div",{key:s,class:"char-box"},[r("span",{class:z([s%2!==0?"char-right":"char-left"]),style:R({"--banner-char-size":`${e.chars[s]}rem`})},[r("span",Je,w(n),1)],6)]))),128))]))}});function et(v){const e=k(()=>{const n=[];for(let s=0;s<v.title.length;s++){const u=te(1.5,3.5);n.push(u)}return n}),t=k(()=>e.value.reduce((n,s)=>n+s,0));return{chars:e,totalCharHeight:t}}const tt={class:"banner-line-container"},nt={class:"banner-line-container bottom"},at=g({__name:"YunBanner",setup(v){const e=V(),t=W(),{totalCharHeight:n,chars:s}=et(t.value.banner),u=k(()=>{const p={"--total-char-height":`${n.value}rem`,"--banner-line-height":`calc(var(--banner-height, 100 * var(--vh)) / 2 - ${n.value/2}rem)`,"justify-content":"space-between"};return e.isStrato&&(p.borderBottom="1px solid var(--banner-line-color)"),p}),c=$("enter"),y=k(()=>c.value),h=$("banner");return j(async()=>{await I(500),c.value="active",e.isNimbo&&(await I(500),c.value="exit",h.value="prologue")}),(p,m)=>{const C=Qe,A=Xe;return a(),o("div",{id:"yun-banner",border:"b-1px b-solid b-$banner-line-color",style:R(u.value)},[r("div",tt,[r("div",{class:z(["banner-line vertical-line-top",y.value])},null,2)]),i(e).isNimbo?(a(),o(S,{key:0},[h.value==="banner"?(a(),Y(C,{key:0,title:i(t).banner.title,chars:i(s)},null,8,["title","chars"])):l("v-if",!0)],64)):l("v-if",!0),i(e).isStrato?(a(),Y(C,{key:1,title:i(t).banner.title,chars:i(s)},null,8,["title","chars"])):l("v-if",!0),r("div",nt,[r("div",{class:z(["banner-line vertical-line-bottom",y.value])},null,2)]),_(A)],4)}}}),st=g({__name:"YunBanner",setup(v){return j(async()=>{await I(8e3)}),(e,t)=>(a(),Y(at))}}),ot={class:"w-full"},rt={class:"absolute top-0 left-5 right-5 bottom-0 flex-center"},lt={key:1,class:"h-$yun-nav-height"},ft=g({__name:"home",setup(v){const e=V(),t=re(),n=W(),s=k(()=>t.path.startsWith("/page")),u=k(()=>{const c=n.value.notice;return c.enable&&(s.value?!c.hideInPages:!0)});return(c,y)=>{const h=st,p=Ke,m=Ne,C=me,A=ue,N=oe("RouterView"),T=ne,B=ae;return a(),o(S,null,[_(T,{class:z(["items-center flex-col",{"mt-0!":!s.value}])},{default:L(()=>[i(n).banner.enable?(a(),o(S,{key:0},[s.value?l("v-if",!0):(a(),o(S,{key:0},[r("div",ot,[_(h),i(e).isNimbo?(a(),Y(q,{key:0,"enter-from-class":"scale-60","enter-to-class":"scale-100","enter-active-class":"transition-300 transition-cubic-bezier-ease-in-out delay-1000",appear:""},{default:L(()=>[r("div",rt,[_(q,{"enter-from-class":"op-0","enter-to-class":"op-100","enter-active-class":"transition-800 delay-1000",appear:""},{default:L(()=>[_(p,{class:"z-1"})]),_:1})])]),_:1})):l("v-if",!0),i(n).say.enable?(a(),Y(m,{key:1,w:"full"})):l("v-if",!0)]),i(e).isNimbo?(a(),Y(C,{key:0,class:"absolute left-0 top-0 right-0 bottom-0"})):l("v-if",!0)],64))],64)):(a(),o("div",lt)),u.value?(a(),Y(A,{key:2,class:z(["mb-2 md:mb-6",{"mt-4":!s.value}]),content:i(n).notice.content},null,8,["class","content"])):l("v-if",!0),M(c.$slots,"board"),M(c.$slots,"default",{},()=>[_(N)])]),_:3},8,["class"]),_(B)],64)}}});export{ft as default};
